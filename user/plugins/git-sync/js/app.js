!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";n(14)},function(e,t){function n(e){return null==e?"":e.toString()}e.exports=n},function(e,t){e.exports=[" ","\n","\r","\t","\f","\v"," "," ","᠎"," "," "," "," "," "," "," "," "," "," "," ","\u2028","\u2029"," "," ","　"]},function(e,t){e.exports=GravAdmin},function(e,t,n){var o,r;!function(s){o=[n(5)],r=function(e){return function(){function t(e,t,n){return h({type:_.error,iconClass:m().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=m()),v=e("#"+t.containerId),v.length?v:(n&&(v=l(t)),v)}function o(e,t,n){return h({type:_.info,iconClass:m().iconClasses.info,message:e,optionsOverride:n,title:t})}function r(e){g=e}function s(e,t,n){return h({type:_.success,iconClass:m().iconClasses.success,message:e,optionsOverride:n,title:t})}function i(e,t,n){return h({type:_.warning,iconClass:m().iconClasses.warning,message:e,optionsOverride:n,title:t})}function a(e,t){var o=m();v||n(o),d(e,o,t)||c(o)}function u(t){var o=m();return v||n(o),t&&0===e(":focus",t).length?void y(t):void(v.children().length&&v.remove())}function c(t){for(var n=v.children(),o=n.length-1;o>=0;o--)d(e(n[o]),t)}function d(t,n,o){var r=!(!o||!o.force)&&o.force;return!(!t||!r&&0!==e(":focus",t).length||(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){y(t)}}),0))}function l(t){return v=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert"),v.appendTo(e(t.target)),v}function f(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function p(e){g&&g(e)}function h(t){function o(e){return null==e&&(e=""),new String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(){a(),c(),d(),l(),f(),u()}function s(){k.hover(x,_),!T.onclick&&T.tapToDismiss&&k.click(g),T.closeButton&&R&&R.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),g(!0)}),T.onclick&&k.click(function(e){T.onclick(e),g()})}function i(){k.hide(),k[T.showMethod]({duration:T.showDuration,easing:T.showEasing,complete:T.onShown}),T.timeOut>0&&(E=setTimeout(g,T.timeOut),U.maxHideTime=parseFloat(T.timeOut),U.hideEta=(new Date).getTime()+U.maxHideTime,T.progressBar&&(U.intervalId=setInterval(C,10)))}function a(){t.iconClass&&k.addClass(T.toastClass).addClass(O)}function u(){T.newestOnTop?v.prepend(k):v.append(k)}function c(){t.title&&(D.append(T.escapeHtml?o(t.title):t.title).addClass(T.titleClass),k.append(D))}function d(){t.message&&(P.append(T.escapeHtml?o(t.message):t.message).addClass(T.messageClass),k.append(P))}function l(){T.closeButton&&(R.addClass("toast-close-button").attr("role","button"),k.prepend(R))}function f(){T.progressBar&&(B.addClass("toast-progress"),k.prepend(B))}function h(e,t){if(e.preventDuplicates){if(t.message===b)return!0;b=t.message}return!1}function g(t){var n=t&&T.closeMethod!==!1?T.closeMethod:T.hideMethod,o=t&&T.closeDuration!==!1?T.closeDuration:T.hideDuration,r=t&&T.closeEasing!==!1?T.closeEasing:T.hideEasing;if(!e(":focus",k).length||t)return clearTimeout(U.intervalId),k[n]({duration:o,easing:r,complete:function(){y(k),T.onHidden&&"hidden"!==H.state&&T.onHidden(),H.state="hidden",H.endTime=new Date,p(H)}})}function _(){(T.timeOut>0||T.extendedTimeOut>0)&&(E=setTimeout(g,T.extendedTimeOut),U.maxHideTime=parseFloat(T.extendedTimeOut),U.hideEta=(new Date).getTime()+U.maxHideTime)}function x(){clearTimeout(E),U.hideEta=0,k.stop(!0,!0)[T.showMethod]({duration:T.showDuration,easing:T.showEasing})}function C(){var e=(U.hideEta-(new Date).getTime())/U.maxHideTime*100;B.width(e+"%")}var T=m(),O=t.iconClass||T.iconClass;if("undefined"!=typeof t.optionsOverride&&(T=e.extend(T,t.optionsOverride),O=t.optionsOverride.iconClass||O),!h(T,t)){w++,v=n(T,!0);var E=null,k=e("<div/>"),D=e("<div/>"),P=e("<div/>"),B=e("<div/>"),R=e(T.closeHtml),U={intervalId:null,hideEta:null,maxHideTime:null},H={toastId:w,state:"visible",startTime:new Date,options:T,map:t};return r(),i(),s(),p(H),T.debug&&console&&console.log(H),k}}function m(){return e.extend({},f(),x.options)}function y(e){v||(v=n()),e.is(":visible")||(e.remove(),e=null,0===v.children().length&&(v.remove(),b=void 0))}var v,g,b,w=0,_={error:"error",info:"info",success:"success",warning:"warning"},x={clear:a,remove:u,error:t,getContainer:n,info:o,options:{},subscribe:r,success:s,version:"2.1.2",warning:i};return x}()}.apply(t,o),!(void 0!==r&&(e.exports=r))}(n(15))},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return e}function s(e){return e.text().then(function(e){var t=e;try{t=JSON.parse(e)}catch(t){var n=document.createElement("div");n.innerHTML=e;var o=new Error;throw o.stack=(0,f.default)(n.innerText),o}return t})}function i(e){var t=e.status||(e.error?"error":""),n=e.message||(e.error?e.error.message:null),o=e.toastr||null,r=void 0;switch(t){case"unauthenticated":throw document.location.href=d.config.base_url_relative,p("Logged out");case"unauthorized":t="error",n=n||"Unauthorized.";break;case"error":t="error",n=n||"Unknown error.";break;case"success":t="success",n=n||"";break;default:t="error",n=n||"Invalid AJAX response."}return o&&(r=Object.assign({},c.default.options),Object.keys(o).forEach(function(e){c.default.options[e]=o[e]})),n&&c.default["success"===t?"success":"error"](n),o&&(c.default.options=r),e}function a(e){var t=e.stack?"<pre><code>"+e.stack+"</code></pre>":"";c.default.error("Fetch Failed: <br /> "+e.message+" "+t),console.error(e.message+" at "+e.stack)}Object.defineProperty(t,"__esModule",{value:!0}),t.parseStatus=r,t.parseJSON=s,t.userFeedback=i,t.userFeedbackError=a;var u=n(7),c=o(u),d=n(3),l=n(11),f=o(l),p=function e(t){var e=new Error(t.statusText||t||"");return e.response=t,e}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),s=o(r);s.default.options.positionClass="toast-top-right",s.default.options.preventDuplicates=!0,t.default=s.default},function(e,t){(function(t){(function(){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function i(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function a(e){var t=new FileReader;return t.readAsArrayBuffer(e),i(t)}function u(e){var t=new FileReader;return t.readAsText(e),i(t)}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob?(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(a)},this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=s(this);return e?e:Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}function l(e,t){t=t||{};var n=t.body;if(l.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function f(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),o=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(o),decodeURIComponent(r))}}),t}function p(e){var t=new r,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),o=n.shift().trim(),r=n.join(":").trim();t.append(o,r)}),t}function h(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof r?t.headers:new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};r.prototype.append=function(e,o){e=t(e),o=n(o);var r=this.map[e];r||(r=[],this.map[e]=r),r.push(o)},r.prototype.delete=function(e){delete this.map[t(e)]},r.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},r.prototype.getAll=function(e){return this.map[t(e)]||[]},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(e,o){this.map[t(e)]=[n(o)]},r.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(o){e.call(t,o,n,this)},this)},this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),o(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},m.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];l.prototype.clone=function(){return new l(this)},c.call(l.prototype),c.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},h.error=function(){var e=new h(null,{status:0,statusText:""});return e.type="error",e};var v=[301,302,303,307,308];h.redirect=function(e,t){if(v.indexOf(t)===-1)throw new RangeError("Invalid status code");return new h(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=l,e.Response=h,e.fetch=function(e,t){return new Promise(function(n,o){function r(){return"responseURL"in i?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):void 0}var s;s=l.prototype.isPrototypeOf(e)&&!t?e:new l(e,t);var i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:p(i),url:r()},t="response"in i?i.response:i.responseText;n(new h(t,e))},i.onerror=function(){o(new TypeError("Network request failed"))},i.ontimeout=function(){o(new TypeError("Network request failed"))},i.open(s.method,s.url,!0),"include"===s.credentials&&(i.withCredentials=!0),"responseType"in i&&m.blob&&(i.responseType="blob"),s.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof s._bodyInit?null:s._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),e.exports=t.fetch}).call(t)}).call(t,function(){return this}())},function(e,t,n){function o(e,t){e=r(e),t=t||s;for(var n,o,i=0,a=e.length,u=t.length,c=!0;c&&i<a;)for(c=!1,n=-1,o=e.charAt(i);++n<u;)if(o===t[n]){c=!0,i++;break}return i>=a?"":e.substr(i,a)}var r=n(1),s=n(2);e.exports=o},function(e,t,n){function o(e,t){e=r(e),t=t||s;for(var n,o,i=e.length-1,a=t.length,u=!0;u&&i>=0;)for(u=!1,n=-1,o=e.charAt(i);++n<a;)if(o===t[n]){u=!0,i--;break}return i>=0?e.substring(0,i+1):""}var r=n(1),s=n(2);e.exports=o},function(e,t,n){function o(e,t){return e=r(e),t=t||s,i(a(e,t),t)}var r=n(1),s=n(2),i=n(9),a=n(10);e.exports=o},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=n(3),s=void 0,i=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};return"function"==typeof n&&(i=n,n={}),n.method&&"post"===n.method&&!function(){var e=new FormData;n.body=Object.assign({"admin-nonce":r.config.admin_nonce},n.body||{}),Object.keys(n.body).map(function(t){return e.append(t,n.body[t])}),n.body=e}(),n=Object.assign({credentials:"same-origin",headers:{Accept:"application/json"}},n),e(t,n).then(function(e){return s=e,e}).then(o.parseStatus).then(o.parseJSON).then(o.userFeedback).then(function(e){return i(e,s)}).catch(o.userFeedbackError)};t.default=i}).call(t,n(8))},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),s=o(r);s.default.options.positionClass="toast-top-right",s.default.options.preventDuplicates=!0,t.default=s.default},function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),s=o(r),i=n(12),a=o(i),u=n(13),c=o(u),d=n(3),l=n(5),f=o(l),p=(0,f.default)('[data-remodal-id="wizard"]'),h=(0,f.default)('[data-remodal-id="reset-local"]'),m={github:"github.com",bitbucket:"bitbucket.org",gitlab:"gitlab.com"},y={REPO_URL:"https://{placeholder}/getgrav/grav.git"},v=function(){var e=p.remodal({closeOnConfirm:!1}),t=p.find('[data-gitsync-action="previous"]'),n=p.find('[data-gitsync-action="next"]'),o=p.find('[data-gitsync-action="save"]');g=0,p.find("form > [class^=step-]:not(.step-"+g+") > .panel").hide().removeClass("hidden"),p.find('form > [class="step-'+g+'"] > .panel').show(),n.removeClass("hidden"),t.addClass("hidden"),o.addClass("hidden"),(0,f.default)('[name="gitsync[repository]"]').trigger("change"),e.open()},g=0,b=0,w=null;(0,f.default)(document).on("closed",p,function(e){g=0}),(0,f.default)(document).on("click","[data-gitsync-useraction]",function(e){e.preventDefault();var t=(0,f.default)(e.target).closest("[data-gitsync-useraction]"),n=t.data("gitsyncUseraction"),o=d.config.current_url+".json";!function(){switch(n){case"wizard":v();break;case"sync":t.find("i").removeClass("fa-cloud").addClass("fa-circle-o-notch fa-spin"),(0,a.default)(o,{method:"post",body:{task:"synchronize"}},function(){t.find("i").removeClass("fa-circle-o-notch fa-spin").addClass("fa-cloud")});break;case"reset":var e=h.remodal({closeOnConfirm:!1});e.open(),h.data("_reset_event_set_")||h.find('[data-gitsync-action="reset-local"]').one("click",function(){e.close(),h.data("_reset_event_set_",!0),t.find("i").removeClass("fa-history").addClass("fa-circle-o-notch fa-spin"),(0,a.default)(o,{method:"post",body:{task:"resetlocal"}},function(){h.data("_reset_event_set_",!1),t.find("i").removeClass("fa-circle-o-notch fa-spin").addClass("fa-history")})})}}()}),(0,f.default)(document).on("click","[data-gitsync-action]",function(t){t.preventDefault();var n=(0,f.default)(t.target).closest("[data-gitsync-action]"),o=p.find('[data-gitsync-action="previous"]'),r=p.find('[data-gitsync-action="next"]'),s=p.find('[data-gitsync-action="save"]'),i=n.data("gitsyncAction"),u=(0,f.default)('[name="gitsync[repo_user]"]').val(),l=(0,f.default)('[name="gitsync[repo_password]"]').val(),h=(0,f.default)('[name="gitsync[repo_url]"]').val(),m=[];if(u||m.push("Username is missing."),h||m.push("Repository is missing."),["save","test"].includes(i)&&m.length)return c.default.error(m.join("<br />")),!1;if("save"===i){var y=(0,f.default)('[name="gitsync[folders]"]:checked').map(function(e,t){return t.value});(0,f.default)('[name="data[repository]"]').val(h),(0,f.default)('[name="data[user]"]').val(u),(0,f.default)('[name="data[password]"]').val(l);var v=(0,f.default)('[name="data[folders][]"]');return v&&v[0]&&v[0].selectize&&v[0].selectize.setValue(y.toArray()),(0,f.default)('[name="task"][value="save"]').trigger("click"),!1}if("test"===i){var w=d.config.current_url+".json",_=e.btoa(JSON.stringify({user:u,password:l,repository:h}));return(0,a.default)(w,{method:"post",body:{test:_,task:"testConnection"}}),!1}p.find(".step-"+g+" > .panel").slideUp(),g+="next"===i?1:-1,p.find(".step-"+g+" > .panel").slideDown(),s.addClass("hidden"),"next"===i&&o.removeClass("hidden"),g<=0&&o.addClass("hidden"),g>0&&r.removeClass("hidden"),g===b&&(r.addClass("hidden"),o.removeClass("hidden"),s.removeClass("hidden"))}),(0,f.default)(document).on("keyup",'[data-gitsync-uribase] [name="gitsync[webhook]"]',function(e){var t=(0,f.default)(e.currentTarget),n=t.val();(0,f.default)(".gitsync-webhook").text(n)}),(0,f.default)(document).on("change",'[name="gitsync[repository]"]',function(e){var t=(0,f.default)(e.target);w=t.val(),Object.keys(m).forEach(function(e){p.find(".hidden-step-"+e)[e===w?"removeClass":"addClass"]("hidden"),e===w&&p.find('input[name="gitsync[repo_url]"][placeholder]').attr("placeholder",y.REPO_URL.replace(/\{placeholder\}/,m[e]))})}),(0,f.default)(document).ready(function(){b=p.find('[class^="step-"]').length-1,p.wrapInner("<form></form>"),h.wrapInner("<form></form>"),!s.default.first_time&&s.default.git_installed||v()}),t.default=s.default}).call(t,function(){return this}())},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=GitSync}]);
//# sourceMappingURL=app.js.map